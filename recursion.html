

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>22. (부록) 재귀 함수 &#8212; 파이썬 프로그래밍 기초</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'recursion';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="23. (부록) 자료형 힌트" href="type_annotations.html" />
    <link rel="prev" title="21. 클래스의 기본 요소" href="proper_classes.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
  
    <p class="title logo__title">파이썬 프로그래밍 기초</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="programming.html">1. 컴퓨터 프로그래밍</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">2. 프로그램 개발 환경</a></li>
<li class="toctree-l1"><a class="reference internal" href="starting.html">3. 프로그래밍 맛보기</a></li>
<li class="toctree-l1"><a class="reference internal" href="variables_expressions.html">4. 변수, 값, 표현식</a></li>
<li class="toctree-l1"><a class="reference internal" href="datatypes.html">5. 기초 자료형</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">6. 함수</a></li>
<li class="toctree-l1"><a class="reference internal" href="casestudy_function_interfaces.html">7. 사례 연구: 함수 인터페이스</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditionals.html">8. 조건문</a></li>
<li class="toctree-l1"><a class="reference internal" href="iterations.html">9. 반복문</a></li>
<li class="toctree-l1"><a class="reference internal" href="casestudy_planning.html">10. 사례 연구: 프로그램 구상</a></li>
<li class="toctree-l1"><a class="reference internal" href="strings.html">11. 문자열</a></li>
<li class="toctree-l1"><a class="reference internal" href="lists_tuples.html">12. 리스트와 튜플</a></li>
<li class="toctree-l1"><a class="reference internal" href="dicts_sets.html">13. 사전과 집합</a></li>
<li class="toctree-l1"><a class="reference internal" href="casestudy_collections.html">14. 사례 연구: 이터러블, 이터레이터, 제너레이터</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">15. 파일</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">16. 모듈</a></li>
<li class="toctree-l1"><a class="reference internal" href="classes_instances_objects.html">17. 클래스, 인스턴스, 객체</a></li>
<li class="toctree-l1"><a class="reference internal" href="casestudy_oop.html">18. 사례 연구: 객체 지향 프로그래밍</a></li>
<li class="toctree-l1"><a class="reference internal" href="inheritance.html">19. 상속</a></li>
<li class="toctree-l1"><a class="reference internal" href="casestudy_inheritance.html">20. 사례 연구: 상속</a></li>
<li class="toctree-l1"><a class="reference internal" href="proper_classes.html">21. 클래스의 기본 요소</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">22. (부록) 재귀 함수</a></li>
<li class="toctree-l1"><a class="reference internal" href="type_annotations.html">23. (부록) 자료형 힌트</a></li>
<li class="toctree-l1"><a class="reference internal" href="webapp_flask.html">24. (부록) 웹앱: Flask</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/codingalzi/pybook/blob/master/jupyter-book/recursion.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/codingalzi/pybook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/codingalzi/pybook/issues/new?title=Issue%20on%20page%20%2Frecursion.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/recursion.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>(부록) 재귀 함수</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">22.1. 기저 조건과 무한 재귀</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">22.2. 재귀 함수의 반환값</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">22.3. 재귀 함수의 콜 스택</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">22.4. 재귀 함수 예제</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">22.4.1. 리스트 합</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">22.4.2. 계승</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">22.4.3. 피보나치 수열</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sec-collatz">22.4.4. 콜라츠 추측</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sec-hanoi">22.4.5. 하노이의 탑</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">22.5. 재귀 시각화</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">22.5.1. 소용돌이</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">22.5.2. 프랙탈 트리</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">22.6. 연습문제</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ch-recursion">
<span id="id1"></span><h1><span class="section-number">22. </span>(부록) 재귀 함수<a class="headerlink" href="#ch-recursion" title="Permalink to this heading">#</a></h1>
<p>하나의 함수가 실행되는 동안 다른 함수를 호출할 수 있으며
심지어 실행되는 함수 자신을 다시 호출할 수 있다.
예를 들어 아래 <code class="docutils literal notranslate"><span class="pre">countdown()</span></code> 함수의 본문에 현재 정의되고 있는 자신에 대한 호출이 포함되어 있다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;발사!&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">countdown</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">countdown()</span></code> 함수의 작동 방식은 다음과 같다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code> 이 0 이하인 경우: <code class="docutils literal notranslate"><span class="pre">'발사!'</span></code> 출력</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code> 이 양의 정수인 경우: <code class="docutils literal notranslate"><span class="pre">n</span></code>을 출력한 다음 바로 <code class="docutils literal notranslate"><span class="pre">countdown(n-1)</span></code> 호출.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">n</span></code> 이 양수인 경우 동일한 함수가 호출되지만 인자가 1적어 지고 결국 <code class="docutils literal notranslate"><span class="pre">n</span></code>이 되어
더 이상의 함수 호출이 없어 실행이 멈춘다.
예를 들어 <code class="docutils literal notranslate"><span class="pre">countdown(3)</span></code>을 호출하면 다음처럼 실행된다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">countdown</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
2
1
발사!
</pre></div>
</div>
</div>
</div>
<p>함수 본문에 자신을 호출하는 함수를 기능을 <strong>재귀</strong><font size="2">recursion</font>라 하며,
<strong>재귀 함수</strong><font size="2">recursive function</font>는 재귀를 활용하는 함수이다.</p>
<section id="id2">
<h2><span class="section-number">22.1. </span>기저 조건과 무한 재귀<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<p>재귀 함수의 실행이 멈추려면 재귀 호출 과정에서 언젠가는 더 이상 자신을 호출하지 않아야 한다.
<code class="docutils literal notranslate"><span class="pre">countdown()</span></code> 함수는 <code class="docutils literal notranslate"><span class="pre">0</span></code>과 함께 호출될 때 더 이상 재귀 호출을 하지 않는다.
이렇게 더 이상 재귀 호출이 발생하지 않도록 하는 경우를
<strong>기저 조건</strong><font size="2">base case</font>이라 한다.
즉, <code class="docutils literal notranslate"><span class="pre">countdown()</span></code> 함수의 기저 조건은 <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">0</span></code>이다.</p>
<p>반면에 아래 함수는 기저 조건을 갖지 않는다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">count_infinitely</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">count_finitely</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">count_infinitely()</span></code> 함수를 호출하면 재귀 호출이 무한정 반복됨을 쉽게 알 수 있다.
하지만 파이썬을 포함해서 대부분의 프로그래밍 언어는 재귀 호출의 무한 반복을 허용하지 않고
언젠가 아래와 같은 오류를 발생시키면서 실행을 중지시킨다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">3</span><span class="p">,</span> <span class="ow">in</span> <span class="n">count_infinitely</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">3</span><span class="p">,</span> <span class="ow">in</span> <span class="n">count_infinitely</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">3</span><span class="p">,</span> <span class="ow">in</span> <span class="n">count_infinitely</span>
  <span class="p">[</span><span class="n">Previous</span> <span class="n">line</span> <span class="n">repeated</span> <span class="mi">992</span> <span class="n">more</span> <span class="n">times</span><span class="p">]</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">2</span><span class="p">,</span> <span class="ow">in</span> <span class="n">count_infinitely</span>
<span class="ne">RecursionError</span><span class="p">:</span> <span class="n">maximum</span> <span class="n">recursion</span> <span class="n">depth</span> <span class="n">exceeded</span> <span class="k">while</span> <span class="n">calling</span> <span class="n">a</span> <span class="n">Python</span> <span class="nb">object</span>
</pre></div>
</div>
<div class="info admonition">
<p class="admonition-title">최대 재귀 한도</p>
<p>파이썬은 <strong>최대 재귀 한도</strong><font size="2">Maximum recursion depth</font>를 정해
허용되는 재귀 호출의 최대 반복 횟수를 지정한다.
한도는 파이썬 버전과 운영체제 등에 따라 다를 수 있으며
필요에 따라 조정하는 것도 가능하다.</p>
<p>사용하는 파이썬의 최대 재귀 한도는 다음 명령문으로 확인할 수 있다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getrecursionlimit</span><span class="p">())</span>
</pre></div>
</div>
</div>
<p>재귀 함수를 실행해서 무한 반복에 빠지거나 최대 재귀 한도를 벗어났다는
오류 메시지가 발생하면 다음 두 가지 사항을 확인해야 한다.</p>
<ul class="simple">
<li><p>기저 조건이 주어졌는가?</p></li>
<li><p>어떠한 경우에도 기저 조건에 다달하는가?</p></li>
</ul>
<p>하나라도 충족되지 않거나 확인할 수 없다면 해당 재귀 함수의 활용에 매우
주의를 기울여야 한다.</p>
</section>
<section id="id3">
<h2><span class="section-number">22.2. </span>재귀 함수의 반환값<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<p>함수의 반환값을 지정하는 <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">표현식</span></code>이 여러 번
사용될 수 있다.
예를 들어 짝수이면 0, 홀수이면 1을 반환하는 함수는 다음과 같이 정의한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">even_odd</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">even_odd</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">even_odd</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p>파이썬 프로그램은 함수 실행 중에 <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">표현식</span></code> 명령문을 만나면
<code class="docutils literal notranslate"><span class="pre">표현식</span></code>의 값을 반환하면서 동시에 함수의 실행을 멈춘다.
따라서 함수 본문에 <code class="docutils literal notranslate"><span class="pre">return</span></code> 명령문이 여러 번 사용되었다 하더라도
한 번만 실행되며, 결국 하나의 반환값만 지정된다.
재귀 함수에 대해서도 동일하게 적용되며 보통은 기저 조건이 성립할 때의 반환값과
재귀 단계에서의 리턴값을 별도로 지정한다.</p>
<p>다음 <code class="docutils literal notranslate"><span class="pre">countdown_num()</span></code> 함수는 카운트 다운 횟수를 반환한다.
인자로 0을 사용하면 바로 0을 반환값으로 지정하고
이후 명령문을 더 이상 실행하지 않고 바로 종료한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">countdown_num</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="s1">&#39;이(가) 양수인 경우!&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">countdown_num</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;반환값:&#39;</span><span class="p">,</span> <span class="n">countdown_num</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>반환값: 0
</pre></div>
</div>
</div>
</div>
<p>하지만 <code class="docutils literal notranslate"><span class="pre">n</span></code>이 <code class="docutils literal notranslate"><span class="pre">0</span></code>보다 크면 <code class="docutils literal notranslate"><span class="pre">countdown_num(n-1)</span></code> 이
재귀적으로 호출되어 실행이 종료할 때까지 기다렸다가
반환값을 받아 <code class="docutils literal notranslate"><span class="pre">result</span></code>가 가리키는 값을 지정한다.
이런 방식으로 재귀 과정에서 반환된 값을 받아 새로운 값을 생성하는 데에 활용할 수 있다.</p>
<p>예를들어 <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">1</span></code>이면 재귀 호출이 한 번 발생하며
재귀 호출된 <code class="docutils literal notranslate"><span class="pre">countdown_num(0)</span></code>은 <code class="docutils literal notranslate"><span class="pre">0</span></code>을 반환하며 종료된다.
따라서 <code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">0</span> <span class="pre">+</span> <span class="pre">1</span></code>이 실행되어 최종적으로 <code class="docutils literal notranslate"><span class="pre">1</span></code>을 반환한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;반환값:&#39;</span><span class="p">,</span> <span class="n">countdown_num</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1 이(가) 양수인 경우!
반환값: 1
</pre></div>
</div>
</div>
</div>
<p>일반적으로 <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">k</span></code>이면 재귀 호출이 <code class="docutils literal notranslate"><span class="pre">k-1</span></code> 번 발생하며
재귀적으로 호출된 역순으로 계산된 값을 반환하며 실행을 종료한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;반환값:&#39;</span><span class="p">,</span> <span class="n">countdown_num</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2 이(가) 양수인 경우!
1 이(가) 양수인 경우!
반환값: 2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;반환값:&#39;</span><span class="p">,</span> <span class="n">countdown_num</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3 이(가) 양수인 경우!
2 이(가) 양수인 경우!
1 이(가) 양수인 경우!
반환값: 3
</pre></div>
</div>
</div>
</div>
</section>
<section id="id4">
<h2><span class="section-number">22.3. </span>재귀 함수의 콜 스택<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h2>
<p>재귀 함수의 실행과정 동안 많은 프레임의 생성과 소멸이 발생하여
콜 스택의 변화가 경우에 따라 매우 복잡해지기도 한다.
아래 그림은 <code class="docutils literal notranslate"><span class="pre">countdown(3)</span></code>을 호출했을 때의 콜 스택의 상태를 스택 다이어그램으로 보여준다.</p>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/pybook/master/jupyter-book/images/count_down.jpg" style="width:300px;"></div><div class="proof example admonition" id="exp_collatz">
<p class="admonition-title"><span class="caption-number">Example 22.1 </span> (PythonTutor: 콜라츠 추측)</p>
<section class="example-content" id="proof-content">
<p><a class="reference external" href="http://pythontutor.com/visualize.html#code=def%20collatz%28num%29%3A%0A%20%20%20%20if%20num%20%3D%3D%201%3A%0A%20%20%20%20%20%20%20%20print%28num%29%0A%20%20%20%20%20%20%20%20return%200%0A%20%20%20%20elif%20num%252%20%3D%3D%200%3A%0A%20%20%20%20%20%20%20%20print%28num,%20end%3D',%20'%29%0A%20%20%20%20%20%20%20%20return%20collatz%28num//2%29%20%2B%201%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20print%28num,%20end%3D',%20'%29%0A%20%20%20%20%20%20%20%20return%20collatz%28num*3%20%2B%201%29%20%2B%201%0A%20%20%20%20%20%20%20%20%0Acollatz%287%29&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false">PythonTutor: 콜라츠 추측</a>에서
재귀 함수 호출 과정 동안 메모리에서 벌어지는 프레임의 생성과 소멸 과정,
즉, 콜 스택의 변화를 살펴볼 수 있다.</p>
</section>
</div></section>
<section id="id5">
<h2><span class="section-number">22.4. </span>재귀 함수 예제<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h2>
<section id="id6">
<h3><span class="section-number">22.4.1. </span>리스트 합<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h3>
<p>리스트 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">3,</span> <span class="pre">5,</span> <span class="pre">7,</span> <span class="pre">9]</span></code>에 포함된 수들의 합을 구해보자.
먼저, <code class="docutils literal notranslate"><span class="pre">for</span></code> 반복문을 이용하면 다음과 같다.</p>
<ul class="simple">
<li><p>합을 0으로 시작.</p></li>
<li><p>각 항목을 확인하여 합에 더하기</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="n">the_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">:</span>
        <span class="n">the_sum</span> <span class="o">=</span> <span class="n">the_sum</span> <span class="o">+</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">the_sum</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">list_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25
</pre></div>
</div>
</div>
</div>
<p>위 코드의 <code class="docutils literal notranslate"><span class="pre">for</span></code> 반복문에서 항목을 확인할 때마다 업데이트되는
<code class="docutils literal notranslate"><span class="pre">the_sum</span></code> 변수는 아래 괄호가 묶인 순서대로 계산되는 값을 차례대로 가리킨다.</p>
<div class="math notranslate nohighlight">
\[(((1 + 3) + 5) + 7) + 9\]</div>
<p>그런데 이 경우 재귀를 이용하려면 아래와 같이 작동하는 항목의 합을 사용해야 한다.</p>
<div class="math notranslate nohighlight">
\[1 + (3 + (5 + (7 + 9)))\]</div>
<p>위 방식을 <code class="docutils literal notranslate"><span class="pre">for</span></code> 반복문으로 구현하면 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="n">the_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">the_sum</span> <span class="o">=</span> <span class="n">the_sum</span> <span class="o">+</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">the_sum</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">list_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25
</pre></div>
</div>
</div>
</div>
<p>항목 더하기 문제를 재귀로 해결하려면 먼저 <code class="docutils literal notranslate"><span class="pre">the_sum</span></code>이 구해지는 과정을 역추적해야 한다.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\text{the_sum} &amp; = 1 + (3 + (5 + (7 + 9))) \\
\text{the_sum} &amp; = 3 + (5 + (7 + 9)) \\
\text{the_sum} &amp; = 5 + (7 + 9) \\
\text{the_sum} &amp; = 7 + 9 \\
\text{the_sum} &amp; = 9
\end{align*}
\end{split}\]</div>
<p><code class="docutils literal notranslate"><span class="pre">the_sum</span></code>의 값이 업데이트되는 과정을 번호를 붙히면 다음을 얻는다.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\text{the_sum}_5 &amp; = 1 + \text{the_sum}_4 \\
\text{the_sum}_4 &amp; = 3 + \text{the_sum}_3 \\
\text{the_sum}_3 &amp; = 5 + \text{the_sum}_2 \\
\text{the_sum}_2 &amp; = 7 + \text{the_sum}_1 \\
\text{the_sum}_1 &amp; = 9
\end{align*}
\end{split}\]</div>
<p><strong>리스트의 머리와 꼬리 활용</strong></p>
<p><span class="math notranslate nohighlight">\(\text{the_sum}_{i}\)</span>가 결정되는 방식은 모든 <span class="math notranslate nohighlight">\(i\)</span>에 대해 동일하게 아래 형식을 따른다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">)</span> <span class="o">=</span> <span class="n">num_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
<p>위 식을 리스트의 머리와 꼬리 개념으로 이해하면 재귀 알고리즘의 작동과정을 보다 쉽게 이해할 수 있다.
단, 큐(queue)에 사용되는 머리, 꼬리 개념과 다름에 주의해야 한다.</p>
<ul class="simple">
<li><p><strong>머리</strong>(head): 리스트의 0번 인덱스 값, 즉 <code class="docutils literal notranslate"><span class="pre">num_list[0]</span></code></p></li>
<li><p><strong>꼬리</strong>(tail): 0번 인덱스를 제외한 나머지, 즉 <code class="docutils literal notranslate"><span class="pre">num_list[1:]</span></code></p></li>
</ul>
<p>현재 리스트에 포함된 항목의 합을 구하려면
먼저 꼬리에 재귀를 적용한 다음 얻어진 결과에 머리를 더하면 된다.
이는 꼬리에 대한 재귀가 특정 값을 반환할 때까지 머리와의 합은 대기상태로 머물러야 함을 의미한다(아래 그림 참조).</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/sumlistIn.png" width="50%"></div>
</figure><p>앞서 설명한 재귀를 함수로 구현하면 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">num_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># 항목이 1개 일때</span>
        <span class="k">return</span> <span class="n">num_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>                   <span class="c1"># 항목이 2개 이상일 때</span>
        <span class="k">return</span> <span class="n">num_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">list_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h3><span class="section-number">22.4.2. </span>계승<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h3>
<p>음이 아닌 정수 <span class="math notranslate nohighlight">\(n\)</span>이 주어졌을 때 1부터 <span class="math notranslate nohighlight">\(n\)</span> 까지의 곱을 <span class="math notranslate nohighlight">\(n\)</span>의 계승 또는
팩토리얼<font size="2">factorial</font>이라 하고 <span class="math notranslate nohighlight">\(n!\)</span>로 표시한다.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
0! &amp; = 1 \\
n! &amp; = n \, (n-1)!\quad\text{단, $n&gt;0$.}
\end{align*}
\end{split}\]</div>
<p>계승을 계산하는 함수 <code class="docutils literal notranslate"><span class="pre">factorial()</span></code> 을 재귀로 구현할 수 있다.</p>
<ul class="simple">
<li><p>기저 조건은 <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">==</span> <span class="pre">0</span></code>이고, 1을 반환한다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code>이 0보다 크면 <code class="docutils literal notranslate"><span class="pre">(n-1)</span></code>의 계승과 <code class="docutils literal notranslate"><span class="pre">n</span></code>을 곱합 값을 반환한다.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>                            <span class="c1"># 기저 조건</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">recursion_step</span> <span class="o">=</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># (n-1)의 계승</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">recursion_step</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id8">
<h3><span class="section-number">22.4.3. </span>피보나치 수열<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h3>
<p><strong>피보나치 수열</strong><font size="2">Fibonacci sequence</font>은
처음엔 1과 1로 시작한 후에 이후의 항목은 이전 두 개의 항목의 합으로 생성된다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1, 1, 2, 3, 5, 8, 13, 21, 34, 55, ...
</pre></div>
</div>
<p>피보나치 수열의 두 항목의 관계 점화식은 다음과 같다.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
f_0 &amp; = 1 \\
f_1 &amp; = 1 \\
f_n &amp; = f_{n-1} + f_{n-2} \quad \text{단, $n \ge 2$.}
\end{align*}
\end{split}\]</div>
<p>점화식이 알려진 수열의 <span class="math notranslate nohighlight">\(n\)</span> 번째 항목을 생성하는
함수는 기본적으로 재귀로 쉽게 구현할 수 있다.
피보나치 수열의 <code class="docutils literal notranslate"><span class="pre">n</span></code> 번째 값을 구하는 함수는 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">elif</span>  <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>                                        <span class="c1"># n &gt;= 2 인 경우</span>
        <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>피보나치 수열의 처음 10개 항목은 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1, 1, 2, 3, 5, 8, 13, 21, 34, 55, ...
</pre></div>
</div>
</div>
</div>
<div class="info admonition">
<p class="admonition-title">인덱스의 시작</p>
<p>프로그래밍에서는 관습적으로 순서를 1번부터가 아닌 0번부터 시작한다.
따라서 피보나치 수열의 0번과 1번 값이 1, 2번 값은 2, 3번 값은 3 등이 된다.</p>
</div>
</section>
<section id="sec-collatz">
<span id="id9"></span><h3><span class="section-number">22.4.4. </span>콜라츠 추측<a class="headerlink" href="#sec-collatz" title="Permalink to this heading">#</a></h3>
<p>독일 수학자 콜라츠(Collatz -&gt; L.)가 1937년에 아래 알고리즘을
얼마나 많이 반복하면 최종적으로 숫자 1에 다다를 것인가를 질문했다.</p>
<ul class="simple">
<li><p>주어진 숫자가 짝수면 2로 나눈다.</p></li>
<li><p>주어진 숫자가 홀수면 3배한 후 1을 더한다.</p></li>
</ul>
<p>실제로 숫자 7부터 시작해서 위 과정을 16번 반복하면 1에 다다른다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>7 -&gt; 22 -&gt; 11 -&gt; 34 -&gt; 17 -&gt; 52 -&gt; 26 -&gt; 13 -&gt; 40 -&gt; 20 -&gt; 10 -&gt; 5 -&gt; 16 -&gt; 8 -&gt; 4 -&gt; 2 -&gt; 1
</pre></div>
</div>
<p>반면에 숫자 128부터 시작하면 7번만 반복하면 된다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>128 -&gt; 64 -&gt; 32 -&gt; 16 -&gt; 8 -&gt; 4 -&gt; 2 -&gt; 1    
</pre></div>
</div>
<p>콜라츠 알고리즘을 재귀 함수로 구현할 수 있다.</p>
<ul class="simple">
<li><p>기저 조건: <code class="docutils literal notranslate"><span class="pre">num</span> <span class="pre">==</span> <span class="pre">1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num</span> <span class="pre">%</span> <span class="pre">2</span> <span class="pre">==</span> <span class="pre">0</span></code>: 짝수인 경우. 2로 나누기</p></li>
<li><p>기타<font size="2">else</font>: 홀수 인 경우. 3배 더하기 1.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">collatz</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>                        <span class="c1"># 기저 조건</span>
        <span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">num</span><span class="o">%</span><span class="k">2</span> == 0:                  # 짝수인 경우
        <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; -&gt; &#39;</span><span class="p">)</span>
        <span class="n">collatz</span><span class="p">(</span><span class="n">num</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>                               <span class="c1"># 홀수인 경우</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; -&gt; &#39;</span><span class="p">)</span>
        <span class="n">collatz</span><span class="p">(</span><span class="n">num</span><span class="o">*</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">collatz</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7 -&gt; 22 -&gt; 11 -&gt; 34 -&gt; 17 -&gt; 52 -&gt; 26 -&gt; 13 -&gt; 40 -&gt; 20 -&gt; 10 -&gt; 5 -&gt; 16 -&gt; 8 -&gt; 4 -&gt; 2 -&gt; 1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">collatz</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>128 -&gt; 64 -&gt; 32 -&gt; 16 -&gt; 8 -&gt; 4 -&gt; 2 -&gt; 1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">collatz</span><span class="p">(</span><span class="mi">129</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>129 -&gt; 388 -&gt; 194 -&gt; 97 -&gt; 292 -&gt; 146 -&gt; 73 -&gt; 220 -&gt; 110 -&gt; 55 -&gt; 166 -&gt; 83 -&gt; 250 -&gt; 125 -&gt; 376 -&gt; 188 -&gt; 94 -&gt; 47 -&gt; 142 -&gt; 71 -&gt; 214 -&gt; 107 -&gt; 322 -&gt; 161 -&gt; 484 -&gt; 242 -&gt; 121 -&gt; 364 -&gt; 182 -&gt; 91 -&gt; 274 -&gt; 137 -&gt; 412 -&gt; 206 -&gt; 103 -&gt; 310 -&gt; 155 -&gt; 466 -&gt; 233 -&gt; 700 -&gt; 350 -&gt; 175 -&gt; 526 -&gt; 263 -&gt; 790 -&gt; 395 -&gt; 1186 -&gt; 593 -&gt; 1780 -&gt; 890 -&gt; 445 -&gt; 1336 -&gt; 668 -&gt; 334 -&gt; 167 -&gt; 502 -&gt; 251 -&gt; 754 -&gt; 377 -&gt; 1132 -&gt; 566 -&gt; 283 -&gt; 850 -&gt; 425 -&gt; 1276 -&gt; 638 -&gt; 319 -&gt; 958 -&gt; 479 -&gt; 1438 -&gt; 719 -&gt; 2158 -&gt; 1079 -&gt; 3238 -&gt; 1619 -&gt; 4858 -&gt; 2429 -&gt; 7288 -&gt; 3644 -&gt; 1822 -&gt; 911 -&gt; 2734 -&gt; 1367 -&gt; 4102 -&gt; 2051 -&gt; 6154 -&gt; 3077 -&gt; 9232 -&gt; 4616 -&gt; 2308 -&gt; 1154 -&gt; 577 -&gt; 1732 -&gt; 866 -&gt; 433 -&gt; 1300 -&gt; 650 -&gt; 325 -&gt; 976 -&gt; 488 -&gt; 244 -&gt; 122 -&gt; 61 -&gt; 184 -&gt; 92 -&gt; 46 -&gt; 23 -&gt; 70 -&gt; 35 -&gt; 106 -&gt; 53 -&gt; 160 -&gt; 80 -&gt; 40 -&gt; 20 -&gt; 10 -&gt; 5 -&gt; 16 -&gt; 8 -&gt; 4 -&gt; 2 -&gt; 1
</pre></div>
</div>
</div>
</div>
<p>재귀 호출 횟수를 반환값으로 지정할 수 있다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">==</span> <span class="pre">1</span></code>: 재귀 호출 없음. 0 반환.</p></li>
<li><p>짝수인 경우: 2로 나눈 값에 대한 재귀 호출 횟수 더하기 1</p></li>
<li><p>홀수인 경우: 세 배 더하기 1에 대한 재귀 호출 횟수 더하기 1</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">collatz_count</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>                        <span class="c1"># 기저 조건</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>                  <span class="c1"># 짝수인 경우</span>
        <span class="k">return</span> <span class="n">collatz_count</span><span class="p">(</span><span class="n">num</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>                               <span class="c1"># 홀수인 경우</span>
        <span class="k">return</span> <span class="n">collatz_count</span><span class="p">(</span><span class="n">num</span><span class="o">*</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">collatz_count</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span> <span class="s2">&quot;회&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>16 회
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">collatz_count</span><span class="p">(</span><span class="mi">128</span><span class="p">),</span> <span class="s2">&quot;회&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7 회
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">collatz_count</span><span class="p">(</span><span class="mi">129</span><span class="p">),</span> <span class="s2">&quot;회&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>121 회
</pre></div>
</div>
</div>
</div>
<p>앞서 보았듯이 처음 시작하는 값이 작다고 해서 반드시 먼저 끝나는 것이 아니다.
이처럼 시작 값이 정해졌을 때 언제 1에 다다르며 종료하는지 알려지지 않았다.
반면에 지금까지 테스트한 모든 자연수에 대해 콜라츠 알고리즘은
언젠가는 1에 다다르며 종료하였다.
즉, 콜라츠 알고리즘이 모든 수에 대해 언젠가는 1에 다다르며 정지한다라는 주장이
아직 증명도 부정도 되지 않고 있다.
이렇게 증명도 부정되 되지 않은 콜라츠의 주장을
<strong>콜라츠 추측</strong><font size="2">Collatz conjecture</font>
이라 부른다.</p>
</section>
<section id="sec-hanoi">
<span id="id10"></span><h3><span class="section-number">22.4.5. </span>하노이의 탑<a class="headerlink" href="#sec-hanoi" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code>, <code class="docutils literal notranslate"><span class="pre">while</span></code> 반복문을 이용하여 해결하기 어려운 문제를
재귀 알고리즘으로 상대적으로 훨씬 간단하게 해결하는 예제로 하노이의 탑 문제를 다룬다.</p>
<p><strong>하노이의 탑</strong><font size='2'>Tower of Hanoi</font> 문제는 세 개의 기둥 중에
하나의 기둥에 쌓여 있는 다양한 크기의 원판들을 다른 기둥으로 옮기는 게임이다.
단, 원판 이동 중에 아래 제한조건들을 반드시 지켜야 한다.</p>
<ul class="simple">
<li><p>한 번에 한개의 원판만 옮긴다.</p></li>
<li><p>큰 원판이 그보다 작은 원판 위에 위치할 수 없다.</p></li>
</ul>
<figure>
<div align="center"><img src="https://upload.wikimedia.org/wikipedia/commons/6/60/Tower_of_Hanoi_4.gif" width="45%"></div>
</figure>
<p>&lt;그림 출처: <a class="reference external" href="https://ko.wikipedia.org/wiki/%ED%95%98%EB%85%B8%EC%9D%B4%EC%9D%98_%ED%83%91">위키백과: 하노이의 탑</a>&gt;</p>
<p><strong>참고</strong>: 일반적으로 원판이 <span class="math notranslate nohighlight">\(n\)</span>개 일 때, <span class="math notranslate nohighlight">\(2^n - 1\)</span>번의 이동으로 원판을 모두 옮길 수 있다.
참고로 64개의 원판을 옮기는 데 총 <span class="math notranslate nohighlight">\(2^{64}-1\)</span> 번 원판을 움직여야 하고,
1초에 하나의 원판을 옮긴다고 가정했을 때 5,849억년 정도 걸린다.</p>
<p><strong>재귀 알고리즘</strong></p>
<p>4개의 원판을 옮겨야 한다고 가정하자.
아래 연속된 그림에서 볼 수 있듯이 3개의 원판을 옮기는 과정을 두 번 반복하면 된다.</p>
<table> 
	<tr> 
		<td><img src="https://raw.githubusercontent.com/codingalzi/pybook/master/jupyter-book/images/hanoi-tower-1.png" width="100%"></td> 
		<td><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/hanoi-tower-2.png" width="100%"></td> 
	</tr> 
	<tr> 
		<td><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/hanoi-tower-3.png" width="100%"></td> 
		<td><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/hanoi-tower-4.png" width="100%"></td> 
	</tr> 
</table> <p>위 설명을 임의의 양의 정수 <code class="docutils literal notranslate"><span class="pre">n</span></code>에 대해 일반화하면 다음과 같다.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n-1</span></code> 개의 원판을 중간 지점의 위치에 옮긴다.</p></li>
<li><p>가장 큰 원판을 목적지로 옮긴다.</p></li>
<li><p>중간 지점에 위치한 <code class="docutils literal notranslate"><span class="pre">n-1</span></code> 개의 원판을 목적지로 옮긴다.</p></li>
</ol>
<p>위 재귀 알고리즘의 종료조건은 <code class="docutils literal notranslate"><span class="pre">n=1</span></code>일 때이며, 이때는 하나의 원판을
목적지로 옮기기만 하면 된다.
이를 코드로 구현하면 다음과 같다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">height</span></code>: 원판 개수</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_pole</span></code>: 출발 기둥</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_pole</span></code>: 중간 지점 기둥</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_pole</span></code>: 목적지 기둥</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">move_tower</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">from_pole</span><span class="p">,</span> <span class="n">to_pole</span><span class="p">,</span> <span class="n">with_pole</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">height</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">move_tower</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">from_pole</span><span class="p">,</span> <span class="n">with_pole</span><span class="p">,</span> <span class="n">to_pole</span><span class="p">)</span>
        <span class="n">move_disk</span><span class="p">(</span><span class="n">from_pole</span><span class="p">,</span> <span class="n">to_pole</span><span class="p">)</span>                           <span class="c1"># 탑 원판 옮기기</span>
        <span class="n">move_tower</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">with_pole</span><span class="p">,</span> <span class="n">to_pole</span><span class="p">,</span> <span class="n">from_pole</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">move_disk</span><span class="p">(</span><span class="n">from_p</span><span class="p">,</span> <span class="n">to_p</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">from_p</span><span class="si">}</span><span class="s2">에서 </span><span class="si">{</span><span class="n">to_p</span><span class="si">}</span><span class="s2">로 탑 원판 옮기기&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">move_tower</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A에서 C로 탑 원판 옮기기
A에서 B로 탑 원판 옮기기
C에서 B로 탑 원판 옮기기
A에서 C로 탑 원판 옮기기
B에서 A로 탑 원판 옮기기
B에서 C로 탑 원판 옮기기
A에서 C로 탑 원판 옮기기
A에서 B로 탑 원판 옮기기
C에서 B로 탑 원판 옮기기
C에서 A로 탑 원판 옮기기
B에서 A로 탑 원판 옮기기
C에서 B로 탑 원판 옮기기
A에서 C로 탑 원판 옮기기
A에서 B로 탑 원판 옮기기
C에서 B로 탑 원판 옮기기
</pre></div>
</div>
</div>
</div>
<p><strong>머리와 꼬리</strong></p>
<p>하노이의 탑 알고리즘에서 머리와 꼬리는 다음과 같다.</p>
<ul class="simple">
<li><p>머리: 바닥에 위치한 원판. 지정된 목적지로 이동하면 끝.</p></li>
<li><p>꼬리: 머리를 제외한 나머지 원판으로 이루어진 탑. 따라서 하나의 꼬리에 대한 두 번의 재귀호출이 이뤄짐.</p></li>
</ul>
</section>
</section>
<section id="id11">
<h2><span class="section-number">22.5. </span>재귀 시각화<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h2>
<p>재귀를 이해하기 위해 재귀 알고리즘의 작동과정을 시각화 해보자.
시각화를 위해 <code class="docutils literal notranslate"><span class="pre">turtle</span></code> 모듈을 이용한다.</p>
<section id="id12">
<h3><span class="section-number">22.5.1. </span>소용돌이<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h3>
<p>재귀로 정의된 <code class="docutils literal notranslate"><span class="pre">draw_spiral()</span></code> 함수는 아래 그림과 같은 소용돌이를 그린다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>

<span class="k">def</span> <span class="nf">draw_spiral</span><span class="p">(</span><span class="n">my_turtle</span><span class="p">,</span> <span class="n">line_len</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">line_len</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">my_turtle</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">line_len</span><span class="p">)</span>
        <span class="n">my_turtle</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
        <span class="n">draw_spiral</span><span class="p">(</span><span class="n">my_turtle</span><span class="p">,</span> <span class="n">line_len</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>


<span class="n">my_turtle</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Turtle</span><span class="p">()</span>
<span class="n">my_win</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Screen</span><span class="p">()</span>
<span class="n">draw_spiral</span><span class="p">(</span><span class="n">my_turtle</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">my_win</span><span class="o">.</span><span class="n">exitonclick</span><span class="p">()</span>
</pre></div>
</div>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/draw_spiral.png" width="60%"></div>
</figure></section>
<section id="id13">
<h3><span class="section-number">22.5.2. </span>프랙탈 트리<a class="headerlink" href="#id13" title="Permalink to this heading">#</a></h3>
<p>아래 이미지처럼 아무리 확대하더라도 항상 동일한 구조를 보여주는 사물이
<strong>프랙탈</strong><font size='2'>fractal</font>이다.</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/mandelbrot_fractal.png" width="70%"></div>
</figure>
<p>&lt;그림 출처: <a class="reference external" href="https://www.youtube.com/watch?v=8cgp2WNNKmQ&amp;ab_channel=MathsTown">YouTube: 만델브로트 프랙탈 줌</a>&gt;</p>
<p>프랙탈의 구조는 재귀와 매우 밀접한 관계를 갖는다.
예를 들어, <code class="docutils literal notranslate"><span class="pre">tree()</span></code> 함수는 아래 모양의 프랙탈 트리를 그린다.</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/fractal_tree_2.png" width="35%"></div>
</figure><div class="info admonition">
<p class="admonition-title">프랙탈 트리</p>
<p>아래 코드를 <a class="reference external" href="https://replit.com/&#64;codingrg/fractaltree">Repl.it: 프랙탈 트리</a>에서
실행할 수 있다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="c1"># import time                    # 주의: repl.it 사이트에서 오류 발생</span>

<span class="k">def</span> <span class="nf">tree</span><span class="p">(</span><span class="n">branch_len</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">branch_len</span> <span class="o">&gt;=</span> <span class="mi">15</span><span class="p">:</span>           <span class="c1"># 종료조건: branch_len &lt; 15</span>
        <span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">branch_len</span><span class="p">)</span>    <span class="c1"># 전진</span>
        <span class="c1"># time.sleep(1)          </span>
        <span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>              <span class="c1"># 오른쪽 가지치기</span>
        <span class="n">tree</span><span class="p">(</span><span class="n">branch_len</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>               <span class="c1"># 왼쪽 가지치기</span>
        <span class="n">tree</span><span class="p">(</span><span class="n">branch_len</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>              <span class="c1"># 한 단계 후진</span>
        <span class="n">t</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">branch_len</span><span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Turtle</span><span class="p">()</span>
<span class="n">my_win</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Screen</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">up</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">down</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
<span class="n">tree</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
<span class="n">my_win</span><span class="o">.</span><span class="n">exitonclick</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tree()</span></code> 함수는 오른쪽 가지를 먼저 그리며, 이 과정을 최대한 멀리 진행한다.
가지치기를 할 때마다 가지의 길이를 15씩 줄이며,
그려야 할 가지의 길이가 15 미만일 때 가지치기를 멈춘다.
아래 이미지는 가지의 길이를 처음에 75로 시작해서 5번 오른쪽 가지치기를 수행한 후
더 이상의 가지치기가 불가능한 상태를 보여준다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/tree1.png" width="45%"></div>
</figure><p>더 이상 오른쪽 가지치기가 불가능하면 뒤로 한 단계 후진한 다음에 왼쪽 가지치기를 진행한다.
왼쪽 가지치기 이후 오른쪽 가지치가 가능하면 이를 먼저 수행한다.
아래 이미지는 그려야할 프랙탈 트리의 절반을 그린 상태를 보여준다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/tree2.png" width="45%"></div>
</figure><p><strong>머리와 꼬리</strong></p>
<p>프랙탈 트리의 경우 가지 하나를 그린 다음 가지치기가 이루어지며
가지치기 이후에는 동일한 과정이 반복된다.
다만, 좌우 각 가지에서 완성되는 프랙탈 트리는
완성되어야 하는 전체 프랙탈 트리의 일부분을 담당한다.
그려진 하나의 가지를 머리, 그려져야 하는 좌우 두 개의 가지를 두 개의 꼬리로
이해할 수 있다.
즉, 아래 그림이 보여주는 것처럼 머리를 그린 다음에 나머지는 각각의 꼬리에 동일한 과제를 떠넘기는 과정의
연속이 된다.</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/fractal_tree_1.png" width="35%"></div>
</figure></section>
</section>
<section id="id14">
<h2><span class="section-number">22.6. </span>연습문제<a class="headerlink" href="#id14" title="Permalink to this heading">#</a></h2>
<p>참고: <a class="reference external" href="https://colab.research.google.com/github/codingalzi/pybook/blob/master/practices/practice-recursion.ipynb">(실습) 재귀 함수</a></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="proper_classes.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">21. </span>클래스의 기본 요소</p>
      </div>
    </a>
    <a class="right-next"
       href="type_annotations.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">23. </span>(부록) 자료형 힌트</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">22.1. 기저 조건과 무한 재귀</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">22.2. 재귀 함수의 반환값</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">22.3. 재귀 함수의 콜 스택</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">22.4. 재귀 함수 예제</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">22.4.1. 리스트 합</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">22.4.2. 계승</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">22.4.3. 피보나치 수열</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sec-collatz">22.4.4. 콜라츠 추측</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sec-hanoi">22.4.5. 하노이의 탑</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">22.5. 재귀 시각화</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">22.5.1. 소용돌이</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">22.5.2. 프랙탈 트리</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">22.6. 연습문제</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 코딩알지 & HJ
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>